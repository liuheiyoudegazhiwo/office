"use strict";
Object.defineProperties(exports, { __esModule: { value: true }, [Symbol.toStringTag]: { value: "Module" } });
const Vue = require("vue");
const TUIChatEngine = require("@tencentcloud/chat-uikit-engine");
const Icon = require("../../../common/Icon.vue.js");
const fileLight = require("../../../../assets/icon/file-light.svg.js");
const _hoisted_1 = ["title"];
const _sfc_main = /* @__PURE__ */ Vue.defineComponent({
  __name: "message-file",
  props: {
    content: { default: () => ({}) },
    messageItem: { default: () => ({}) }
  },
  setup(__props) {
    const props = __props;
    const download = () => {
      if (props.messageItem.hasRiskContent) {
        return;
      }
      const option = {
        mode: "cors",
        headers: new Headers({
          "Content-Type": "application/x-www-form-urlencoded"
        })
      };
      if (window == null ? void 0 : window.fetch) {
        fetch(props.content.url, option).then((res) => res.blob()).then((blob) => {
          const a = document.createElement("a");
          const url = window.URL.createObjectURL(blob);
          a.href = url;
          a.download = props.content.name;
          a.click();
        });
      } else {
        const a = document.createElement("a");
        a.href = props.content.url;
        a.target = "_blank";
        a.download = props.content.name;
        a.click();
      }
    };
    return (_ctx, _cache) => {
      return Vue.openBlock(), Vue.createElementBlock("div", {
        class: "file-message-montainer",
        title: Vue.unref(TUIChatEngine.TUITranslateService).t("TUIChat.单击下载"),
        onClick: download
      }, [
        Vue.createVNode(Icon.default, {
          file: Vue.unref(fileLight.default),
          class: "file-icon"
        }, null, 8, ["file"]),
        Vue.createElementVNode("div", null, [
          Vue.createElementVNode("div", null, Vue.toDisplayString(props.content.name), 1),
          Vue.createElementVNode("div", null, Vue.toDisplayString(props.content.size), 1)
        ])
      ], 8, _hoisted_1);
    };
  }
});
exports.default = _sfc_main;
