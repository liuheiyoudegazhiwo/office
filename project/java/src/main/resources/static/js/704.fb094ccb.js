"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[704],{287:function(t,e,r){r.d(e,{CI:function(){return E},DV:function(){return h},EZ:function(){return P},Ex:function(){return at},GR:function(){return o},Hl:function(){return T},Jq:function(){return l},KJ:function(){return G},KP:function(){return H},L:function(){return U},Lc:function(){return tt},O:function(){return st},PT:function(){return R},R3:function(){return lt},SJ:function(){return S},Sq:function(){return V},Ts:function(){return B},U0:function(){return k},Ue:function(){return et},Ux:function(){return d},V0:function(){return ot},Vd:function(){return g},WX:function(){return K},Wd:function(){return x},_7:function(){return w},_f:function(){return _},aC:function(){return $},aI:function(){return y},aS:function(){return D},ag:function(){return v},dG:function(){return j},dX:function(){return rt},en:function(){return C},fY:function(){return Y},ge:function(){return Q},gu:function(){return f},h5:function(){return N},hn:function(){return L},iD:function(){return M},jx:function(){return A},k8:function(){return s},lC:function(){return I},lI:function(){return z},lO:function(){return it},lc:function(){return F},mR:function(){return b},mx:function(){return u},oA:function(){return p},qV:function(){return Z},r6:function(){return W},rf:function(){return m},sA:function(){return nt},ti:function(){return i},ul:function(){return c},vL:function(){return q},vV:function(){return J},xw:function(){return X},y1:function(){return O},z_:function(){return n}});var a=r(5898);function n(t){return(0,a.A)({url:"/api/querypaper",method:"post",data:t})}function s(t){return(0,a.A)({url:"/api/addpaper",method:"post",data:t})}function o(t){return(0,a.A)({url:"/api/updatepaper",method:"post",data:t})}function i(t){return(0,a.A)({url:"/api/removepaper",method:"post",data:t})}function l(t){return(0,a.A)({url:"/api/queryelectron",method:"post",data:t})}function u(t){return(0,a.A)({url:"/api/addelectron",method:"post",data:t})}function c(t){return(0,a.A)({url:"/api/updateelectron",method:"post",data:t})}function d(t){return(0,a.A)({url:"/api/queryannouncementbyid",method:"post",data:t})}function p(t){return(0,a.A)({url:"/api/queryusercs",method:"post",data:t})}function m(t){return(0,a.A)({url:"/api/querykaoshiuser",method:"post",data:t})}function f(t){return(0,a.A)({url:"/api/modifyPwd",method:"post",data:t})}function h(t){return(0,a.A)({url:"/api/plinsertresult",method:"post",data:t})}function g(t){return(0,a.A)({url:"/api/removeelectron",method:"post",data:t})}function b(t){return(0,a.A)({url:"/api/addapprase",method:"post",data:t})}function y(t){return(0,a.A)({url:"/api/deleteiscunzai",method:"post",data:t})}function v(t){return(0,a.A)({url:"/api/queryuserquestion",method:"post",data:t})}function A(t){return(0,a.A)({url:"/api/plinsertque",method:"post",data:t})}function w(t){return(0,a.A)({url:"/api/addSysUser",method:"post",data:t})}function k(t){return(0,a.A)({url:"/api/updateSysUser",method:"post",data:t})}function x(t){return(0,a.A)({url:"/api/userremove",method:"post",data:t})}function S(t){return(0,a.A)({url:"/api/userQueryList",method:"post",data:t})}function q(t){return(0,a.A)({url:"/api/updateUserstatus",method:"post",data:t})}function N(t){return(0,a.A)({url:"/api/querysysnews",method:"post",data:t})}function C(t){return(0,a.A)({url:"/api/addsysnews",method:"post",data:t})}function _(t){return(0,a.A)({url:"/api/updatesysnews",method:"post",data:t})}function $(t){return(0,a.A)({url:"/api/updatesysnewsstatus",method:"post",data:t})}function T(t){return(0,a.A)({url:"/api/removesysnews",method:"post",data:t})}function V(t){return(0,a.A)({url:"/api/taskverifymore",method:"post",data:t})}function L(t){return(0,a.A)({url:"/api/chatremove",method:"post",data:t})}function R(t){return(0,a.A)({url:"/api/questionselect",method:"post",data:t})}function U(t){return(0,a.A)({url:"/api/updatataskstatus",method:"post",data:t})}function j(t){return(0,a.A)({url:"/api/taskverify",method:"post",data:t})}function I(t){return(0,a.A)({url:"/api/getclassquestion",method:"post",data:t})}function E(t){return(0,a.A)({url:"/api/questionupdata",method:"post",data:t})}function z(t){return(0,a.A)({url:"/api/questionremove",method:"post",data:t})}function D(t){return(0,a.A)({url:"/api/questioninsert",method:"post",data:t})}function O(t){return(0,a.A)({url:"/api/querychatart",method:"post",data:t})}function P(t){return(0,a.A)({url:"/api/deletearticle",method:"post",data:t})}function B(t){return(0,a.A)({url:"/api/queryarticle",method:"post",data:t})}function X(t){return(0,a.A)({url:"/api/resetPassword",method:"post",data:t})}function M(t){return(0,a.A)({url:"/api/login",method:"post",data:t})}function G(t){return(0,a.A)({url:"/api/addfloor",method:"post",data:t})}function H(t){return(0,a.A)({url:"/api/updatafloor",method:"post",data:t})}function J(t){return(0,a.A)({url:"/api/removefloor",method:"post",data:t})}function W(t){return(0,a.A)({url:"/api/queryfloor",method:"post",data:t})}function Z(t){return(0,a.A)({url:"/api/insertchat",method:"post",data:t})}function F(t){return(0,a.A)({url:"/api/querychat",method:"post",data:t})}function K(t){return(0,a.A)({url:"/api/removeannouncement",method:"post",data:t})}function Q(t){return(0,a.A)({url:"/api/updateannostatus",method:"post",data:t})}function Y(t){return(0,a.A)({url:"/api/updateannouncement",method:"post",data:t})}function tt(t){return(0,a.A)({url:"/api/addannouncement",method:"post",data:t})}function et(t){return(0,a.A)({url:"/api/queryannouncement",method:"post",data:t})}function rt(t){return(0,a.A)({url:"/api/deleteresult",method:"post",data:t})}function at(t){return(0,a.A)({url:"/api/addkaoshiresult",method:"post",data:t})}function nt(t){return(0,a.A)({url:"/api/queryresult",method:"post",data:t})}function st(t){return(0,a.A)({url:"/api/updatasubmitdata",method:"post",data:t})}function ot(t){return(0,a.A)({url:"/api/selectsubmit",method:"post",data:t})}function it(t){return(0,a.A)({url:"/api/fankuiremove",method:"post",data:t})}function lt(t){return(0,a.A)({url:"/api/searchbyno",method:"post",data:t})}},5898:function(t,e,r){var a=r(5547),n=r.n(a),s=r(2057);const o="/",i=n().create({baseURL:o,timeout:6e4,headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:[function(t){return t}]});i.interceptors.request.use((t=>{t.headers["Cache-Control"]="no-cache",t.headers["X-Requested-With"]="XMLHttpRequest",t.headers["platform"]="PC";try{let e=JSON.parse(sessionStorage.getItem("userinfo"));t.headers["empNo"]=e.empNo}catch(e){}return localStorage.getItem("AUTHORIZATIONGENERAL")&&""!=localStorage.getItem("AUTHORIZATIONGENERAL")?t.headers["Authorization"]=localStorage.getItem("AUTHORIZATIONGENERAL"):t.headers["Authorization"]="",t.data&&(t.headers["Content-Type"]="application/json;charset=UTF-8",t.data=JSON.stringify(t.data)),"get"==t.method&&(t.params=t.params||{},t.params.t=(new Date).getTime()),t}),(t=>{Promise.reject(t)})),i.interceptors.response.use((t=>{let e={};if(200===t.status){let r=t.data.code;return 1e3==r?(localStorage.setItem("AUTHORIZATIONGENERAL",""),location.href="#/login?"+Math.random(),s.Message.error(t.data.userMsg),Promise.reject(e)):2001==r?(s.Message.error(t.data.userMsg),Promise.reject(e)):5e3==r?(s.Message.error(t.data.userMsg),Promise.reject(t.data.userMsg)):Promise.resolve(t.data)}return Promise.reject(t)}),(t=>Promise.reject(t))),e.A=i},4704:function(t,e,r){r.r(e),r.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pendingflag,expression:"pendingflag"}],staticClass:"user-main"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"user-demoright",attrs:{xs:24,sm:24,md:24}},[e("div",{staticClass:"demo-user-search"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{md:12,lg:8}},[e("div",{staticClass:"demo-input-suffix"},[t._v(" 用户状态 "),e("el-select",{staticClass:"search-user",attrs:{placeholder:"请选择"},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},[e("el-option",{attrs:{label:"正常",value:"正常"}}),e("el-option",{attrs:{label:"停用",value:"停用"}})],1)],1)]),e("el-col",{attrs:{md:12,lg:8}},[e("div",{staticClass:"search-butgroup"},[e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-search",round:""},on:{click:t.searchfun}},[t._v("搜索 ")])],1)])],1)],1),e("div",{staticClass:"demo-user-contentfu"},[e("div",{staticClass:"demo-user-content"},[e("el-row",{staticClass:"demo-user-contentbutleft"},[e("el-col",{attrs:{span:10}},[e("div",{staticClass:"demo-user-contentbutleftsub"},[e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.adddata}},[t._v("新增 ")])],1)]),e("el-col",{attrs:{span:6}},[t._v(" ")]),e("el-col",{attrs:{span:8}})],1)],1),e("div",{staticClass:"demo-user-page"},[e("el-table",{ref:"multipleTable",staticClass:"demo-user-tablemore",staticStyle:{width:"100%"},attrs:{border:"","header-cell-style":{"text-align":"center","background-color":"#f1f1f1"},"cell-style":{"text-align":"center"},data:t.tableData,"tooltip-effect":"dark",height:"550"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{prop:"empNo",label:"账号"}}),e("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),t._l(t.griddata,(function(t,r){return e("el-table-column",{key:r,attrs:{prop:t.prop,label:t.label,width:t.width}})})),e("el-table-column",{attrs:{label:"角色"},scopedSlots:t._u([{key:"default",fn:function(r){return["管理员"==r.row.role?e("el-tag",{attrs:{type:"success"}},[t._v(t._s(r.row.role))]):e("el-tag",{attrs:{type:"danger"}},[t._v(t._s(r.row.role))])]}}])}),e("el-table-column",{attrs:{label:"状态",width:"65"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(e){return t.changestatus(r.$index,r.row)}},model:{value:r.row.status,callback:function(e){t.$set(r.row,"status",e)},expression:"scope.row.status"}})]}}])}),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",plain:"",size:"mini"},on:{click:function(e){return t.handleEdit(r.$index,r.row)}}}),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",plain:"",size:"mini"},on:{click:function(e){return t.handleDelete(r.$index,r.row)}}}),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"重置密码",placement:"top"}},[e("el-button",{attrs:{type:"warning",icon:"el-icon-unlock",circle:"",plain:"",size:"mini"},on:{click:function(e){return t.resetpass(r.$index,r.row)}}})],1)]}}])})],2)],1)])])],1),e("el-dialog",{attrs:{title:"提示",visible:t.repassDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.repassDialogVisible=e}}},[e("span",[t._v(t._s(t.repassstr))]),e("el-input",{staticStyle:{width:"80%","margin-top":"15px"},attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.repassvalue,callback:function(e){t.repassvalue=e},expression:"repassvalue"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.repassDialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.setrepass}},[t._v("确 定")])],1)],1),e("el-dialog",{staticClass:"diaitemuser",attrs:{title:t.userinfotitle,visible:t.dialoguserVisible,width:"600px","append-to-body":""},on:{"update:visible":function(e){t.dialoguserVisible=e}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[e("el-row",[e("el-col",{attrs:{span:24}},[void 0==t.form.userId?e("el-form-item",{attrs:{label:"用户名称",prop:"userName"}},[e("el-input",{attrs:{placeholder:"请输入用户名称",maxlength:"30"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1):t._e()],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"用户账号",prop:"empNo"}},[e("el-input",{attrs:{placeholder:"请输入账号",maxlength:"30"},on:{blur:t.validempno},model:{value:t.form.empNo,callback:function(e){t.$set(t.form,"empNo",e)},expression:"form.empNo"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"角色"}},[e("el-select",{attrs:{placeholder:"请选择角色"},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}},t._l(t.optionsrole,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[e("el-input",{attrs:{placeholder:"请输入手机号码",maxlength:"11"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[e("el-input",{attrs:{placeholder:"请输入邮箱",maxlength:"50"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"状态"}},[e("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[e("el-radio",{attrs:{label:0}},[t._v("正常")]),e("el-radio",{attrs:{label:1}},[t._v("停用")])],1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"能力","label-width":t.formLabelWidth}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.form.nandu,callback:function(e){t.$set(t.form,"nandu",e)},expression:"form.nandu"}},[e("el-option",{attrs:{label:"简单",value:"简单"}}),e("el-option",{attrs:{label:"一般",value:"一般"}}),e("el-option",{attrs:{label:"复杂",value:"复杂"}})],1)],1)],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.userinfosubmit}},[t._v("确 定")]),e("el-button",{on:{click:function(e){t.dialoguserVisible=!1}}},[t._v("取 消")])],1)],1)],1)},n=[],s=(r(435),r(2950),r(9511),r(3607),r(1360),r(8151),r(2068),r(2080),r(1071),r(834),r(287)),o=r(6365),i={name:"systemuser",components:{},created(){this.init()},mounted(){this.excelinit()},data(){return{inpuflag:!0,pendingflag:!1,reuserid:"",repassvalue:"",repassstr:"",passworddisable:!1,repassDialogVisible:!1,updatetype:"",current:1,size:10,total:0,single:!0,multiple:!0,userinfotitle:"",dialogcolnmVisible:!1,dialoguserVisible:!1,search:{username:"",status:"正常"},griddata:[{prop:"mobile",label:"手机号",width:""},{prop:"nandu",label:"能力",width:""}],tableData:[],multipleSelection:[],currentPage:1,form:{userName:"",empNo:"",email:"",mobile:"",remark:"",nandu:"",status:0,role:""},rules:{userName:[{required:!0,message:"用户名称不能为空",trigger:"blur"},{min:2,max:20,message:"用户名称长度必须介于 2 和 20 之间",trigger:"blur"}],empNo:[{required:!0,message:"账号不能为空",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],mobile:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]},optionsadmin:[{value:0,label:"是"},{value:1,label:"否"}],optionsrole:[{label:"用户",value:"用户"}]}},methods:{init(){this.query()},query(){let t={userName:this.search.username||"",status:this.search.status||0,current:this.current,searchType:"",size:this.size,status:"正常"==this.search.status?0:1};this.pendingflag=!0,(0,s.SJ)(t).then((t=>{let e=t;e=e.filter(((t,e)=>"用户"==t.role)),this.tableData=e.map(((t,e)=>(t.status=0==t.status,t))),this.total=t.data.total,this.pendingflag=!1})).catch((t=>{this.pendingflag=!1}))},validempno(t){let e={empNo:this.form.empNo};(0,s.R3)(e).then((t=>{t.length>0&&(this.$message.error("该账号已存在"),this.form.empNo="")})).catch((t=>{}))},setrepass(){this.pendingflag=!0;let t=this.reuserid,e=this.repassvalue,r={id:t,password:e};(0,s.xw)(r).then((t=>{this.repassDialogVisible=!1,this.$message.success("操作成功"),this.pendingflag=!1})).catch((t=>{this.pendingflag=!1}))},updatedata(){this.passworddisable=!0,this.dialoguserVisible=!0,this.userinfotitle="修改用户",this.updatetype="top",this.form=this.multipleSelection[0]},searchfun(){this.query()},resetfun(){this.search.username="",this.search.status=""},handleSelectionChange(t){this.multipleSelection=t,this.single=1!=t.length,this.multiple=!t.length},handleSizeChange(t){this.size=t,this.query()},handleCurrentChange(t){this.current=t,this.query()},headerstyle(){return"background-color: #f1f1f1"},deletedata(){let t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{let e=[];t.multipleSelection.forEach(((t,r)=>{e.push(t.id)}));let r={ids:e};t.pendingflag=!0,(0,s.Wd)(r).then((e=>{t.query(),t.$message.success("操作成功")})).catch((e=>{t.$message.error("操作失败"),t.pendingflag=!1}))})).catch((()=>{this.$message({type:"info",message:"已取消"})}))},resetpass(t,e){this.repassDialogVisible=!0,this.repassstr=`请输入“${e.userName}”的新密码`,this.reuserid=e.id},userinfosubmit(){if(this.pendingflag=!0,"新增用户"==this.userinfotitle){let t={empNo:this.form.empNo,mobile:this.form.mobile,password:"123456",remark:this.form.remark||"",nandu:this.form.nandu,role:this.form.role,isadmin:0,userName:this.form.userName,email:this.form.email,jifen:this.form.jifen,status:this.form.status,deptdesc:"",zhicheng:""};(0,s._7)(t).then((t=>{this.query(),this.$message.success("操作成功"),this.dialoguserVisible=!1,this.reset()})).catch((t=>{this.dialoguserVisible=!1,this.pendingflag=!1}))}else{let t;"top"==this.updatetype&&(t=this.multipleSelection[0].id),"line"==this.updatetype&&(t=this.form.id);let e=this.form;e.id=t,e.remark=this.form.remark||"",(0,s.U0)(e).then((t=>{this.query(),this.$message.success("操作成功"),this.dialoguserVisible=!1,this.reset()})).catch((t=>{this.dialoguserVisible=!1,this.pendingflag=!1}))}},adddata(){this.passworddisable=!1,this.reset(),this.dialoguserVisible=!0,this.userinfotitle="新增用户"},reset(){this.form={}},changestatus(t,e){let r={id:e.id,status:e.status?0:1};(0,s.vL)(r).then((t=>{this.query(),this.$message.success("操作成功")})).catch((t=>{}))},handleEdit(t,e){this.passworddisable=!0,this.updatetype="line",this.userinfotitle="修改用户",this.dialoguserVisible=!0;let r=(0,o.A4)(e);this.form=r,this.form.status=r.status?0:1},handleDelete(t,e){let r=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{let t={id:e.id};r.pendingflag=!0,(0,s.Wd)(t).then((t=>{r.query(),r.$message.success("操作成功")})).catch((t=>{r.$message.error("操作失败"),r.pendingflag=!0}))})).catch((()=>{this.$message({type:"info",message:"已取消"})}))},excelinit(){let t=this,e="";document.querySelector("#file").addEventListener("change",(function(){var r=document.querySelector("#file").files[0],a=r.name.split(".");if("xlsx"!==a[a.length-1]&&"xls"!==a[a.length-1])return alert("只能选择excel文件导入"),!1;const n=new FileReader;n.readAsBinaryString(r),n.onload=r=>{const a=r.target.result,n=window.XLS.read(a,{type:"binary"}),s=[];for(let t=0;t<n.SheetNames.length;t++){const e=window.XLS.utils.sheet_to_json(n.Sheets[n.SheetNames[t]]);s.push(...e)}console.log("result",s),e=s;let o=s.map(((t,e)=>t));t.$confirm("此操作将将追加数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{t.pendingflag=!0,saveuserexcel(o).then((e=>{location.reload(),console.log(e),t.query(),t.pendingflag=!1})).catch((e=>{t.pendingflag=!1}))})).catch((()=>{t.$message({type:"info",message:"已取消"})}))}}))},saveAs(t,e){var r=document.createElement("a");r.download=e||"下载",r.href=URL.createObjectURL(t),r.click(),setTimeout((function(){URL.revokeObjectURL(t)}),100)},downloadExl(t,e){let r=this;const a={SheetNames:["Sheet1"],Sheets:{},Props:{}};a.Sheets["Sheet1"]=XLSX.utils.json_to_sheet(t);let n={bookType:"xlsx",bookSST:!1,type:"binary"};console.log(n),this.saveAs(new Blob([r.s2ab(XLSX.write(a,n))],{type:"application/octet-stream"}),"这里是下载的文件名."+("biff2"==n.bookType?"xls":n.bookType))},s2ab(t){if("undefined"!==typeof ArrayBuffer){for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),a=0;a!=t.length;++a)r[a]=255&t.charCodeAt(a);return e}for(e=new Array(t.length),a=0;a!=t.length;++a)e[a]=255&t.charCodeAt(a);return e}},watch:{}},l=i,u=r(6367),c=(0,u.A)(l,a,n,!1,null,"b1ace554",null),d=c.exports}}]);