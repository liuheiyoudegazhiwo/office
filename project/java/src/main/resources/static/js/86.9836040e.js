"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[86],{5761:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-main"},[t("toppage",{attrs:{lefttitle:e.lefttitle}}),t("el-row",{attrs:{gutter:20}},[t("el-col",{staticClass:"user-demoright",attrs:{xs:24,sm:24,md:24}},[t("div",{staticClass:"demo-user-search"},[t("el-row",{staticStyle:{display:"flex","align-items":"center"},attrs:{gutter:20}},[t("el-col",{attrs:{md:12,lg:6}},[t("div",{staticClass:"demo-input-suffix"},[e._v(" 考场: "),t("el-select",{staticClass:"search-user",attrs:{"prefix-icon":"el-icon-user",placeholder:"请选择"},model:{value:e.search.kaochangid,callback:function(t){e.$set(e.search,"kaochangid",t)},expression:"search.kaochangid"}},e._l(e.kaochangArr,(function(e){return t("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1)]),t("el-col",{attrs:{md:12,lg:5}},[t("div",{staticClass:"search-butgroup"},[t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-search",round:""},on:{click:e.searchfun}},[e._v("搜索 ")])],1)])],1)],1),t("div",{staticClass:"demo-user-contentfu"},[t("div",{staticClass:"demo-user-content"},[t("el-row",{staticClass:"demo-user-contentbutleft"},[t("el-col",{attrs:{span:10}}),t("el-col",{attrs:{span:6}},[e._v(" ")]),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"demo-user-contentbutrightsub"})])],1)],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pendingflag,expression:"pendingflag"}],staticClass:"demo-user-page"},[t("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":e.headerstyle,data:e.tableData,height:"550"}},[t("el-table-column",{attrs:{label:"提交时间",prop:"datetime",width:""}}),t("el-table-column",{attrs:{label:"考试人员",prop:"userName",width:""}}),t("el-table-column",{attrs:{label:"分数",prop:"result",width:""}}),t("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-view",circle:"",plain:"",size:"mini"},on:{click:function(t){return e.handlesee(s.$index,s.row)}}})]}}])})],1)],1)])])],1),t("el-dialog",{attrs:{"close-on-click-modal":!1,title:"详情",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[t("el-table",{attrs:{data:e.answerarr}},[t("el-table-column",{attrs:{property:"title",label:"题目",width:"400"}}),t("el-table-column",{attrs:{property:"tmzqda",label:"用户选择",width:"200"}}),t("el-table-column",{attrs:{property:"userresult",label:"正确答案",width:"200"}})],1)],1)],1)},i=[],r=(s(435),s(287)),l=s(6365),n=s(3066),o={name:"orderlist",components:{toppage:n.A},created(){this.userinfo=JSON.parse(sessionStorage.getItem("userinfo_user")),this.getkaochang()},data(){return{lefttitle:"成绩查询",kaochangArr:[],answerarr:[],timer:null,pritform:{qjdatetime:"",qjroomdesc:"",username:"",descstr:"",countnum:""},cunjiuarr:[],userinfo:{},imgshow:"",dialogTableVisible:!1,imageUrl:"",pendingflag:!1,reuserid:"",repassvalue:"",repassstr:"",passworddisable:!1,repassDialogVisible:!1,updatetype:"",current:1,size:10,total:0,single:!0,multiple:!0,userinfotitle:"",dialoguserVisible:!1,search:{kaochangid:"",date:[],keyword:"",status:1},tableData:[],multipleSelection:[],currentPage:1}},methods:{init(){this.searchfun()},handleDelete(e,t){let s=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{s.pendingflag=!0;let e={id:t.id};s.pendingflag=!0,(0,r.dX)(e).then((e=>{s.query(),s.$message.success("操作成功")})).catch((e=>{s.$message.error("操作失败"),s.pendingflag=!1}))})).catch((()=>{this.$message({type:"info",message:"已取消"})}))},getkaochang(){let e={current:1,keyword:"",size:1e3,status:0};(0,r.Ue)(e).then((e=>{this.kaochangArr=e})).catch((e=>{}))},changesquerytatus(){this.current=1,this.size=10,this.tableData=[],this.searchfun()},handlesee(e,t){console.log(t),this.dialogTableVisible=!0,this.answerarr=t.list},query(){let e={userid:this.userinfo.id,current:this.current,size:this.size,datearr:this.search.date||[],keyword:this.search.keyword,status:this.search.status,kaochangid:this.search.kaochangid};this.pendingflag=!0,(0,r.sA)(e).then((e=>{let t=e;console.log(t),this.tableData=t.map(((e,t)=>(e.datastr&&(e.list=JSON.parse(e.datastr)),e))),this.total=e.count,this.pendingflag=!1})).catch((e=>{this.pendingflag=!1}))},searchfun(){if(""==this.search.kaochangid)return this.$message.error("请先选择考场"),!1;this.query()},resetfun(){this.search.date=[],this.search.phone="",this.search.shopdesc=""},handleChange(e){e&&(this.selectdepid=e)},handleSelectionChange(e){this.multipleSelection=e,this.single=1!=e.length,this.multiple=!e.length},handleSizeChange(e){this.size=e,this.query()},handleCurrentChange(e){this.current=e,this.query()},headerstyle(){return"background-color: #f1f1f1"},deletedata(){let e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{let t=[];e.multipleSelection.forEach(((e,s)=>{t.push(e.id)}));let s={ids:t};e.pendingflag=!0,orderremove(s).then((t=>{e.query(),e.$message.success("操作成功")})).catch((t=>{e.$message.error("操作失败"),e.pendingflag=!1}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},shenhefun(e,t){let s=this;s.pritform=(0,l.A4)(t),console.log(s.pritform),this.$confirm("是否审核该数据该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{let e={id:t.id,status:2};s.pendingflag=!0,(0,r.updatemgsstatus)(e).then((e=>{s.query();let a={orderno:t.orderno};(0,r.selectimglistbyid)(a).then((e=>{console.log("resext",e),s.cunjiuarr=e,e.length>0&&setTimeout((()=>{s.$print(s.$refs.printTest,s.handlePrintComplete),s.timer=setTimeout((()=>{s.clean()}),3e3)}),1e3)})).catch((e=>{})),s.$message.success("操作成功")})).catch((e=>{s.$message.error("操作失败"),s.pendingflag=!0}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},handlePrintComplete(){console.log("打印完成")},shenheunfun(e,t){let s=this;this.$confirm("是否取消审核该数据该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{let e={id:t.id,status:1};s.pendingflag=!0,(0,r.updatemgsstatus)(e).then((e=>{s.query(),s.$message.success("操作成功")})).catch((e=>{s.$message.error("操作失败"),s.pendingflag=!0}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},todownload(e,t){let s=this,a=t.imglist,i=[];a.forEach(((e,t)=>{i.push(e.maxsizeurl)}));let l={imagePaths:i};s.pendingflag=!0,(0,r.download)(l).then((e=>{s.pendingflag=!1,s.$message.success(`操作成功,下载地址为：${e}`);const t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=e,t.click(),document.body.removeChild(t)})).catch((e=>{s.$message.error("操作失败"),s.pendingflag=!1}))},showimg(e){this.dialogTableVisible=!0,this.imgshow=e},clean(){this.pritform.createtime="",this.pritform.roomdesc="",this.pritform.username="",this.cunjiuarr=[]}},watch:{}},c=o,h=s(6367),d=(0,h.A)(c,a,i,!1,null,"392864a8",null),u=d.exports}}]);