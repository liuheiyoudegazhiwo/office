"use strict";
Object.defineProperties(exports, { __esModule: { value: true }, [Symbol.toStringTag]: { value: "Module" } });
const Vue = require("vue");
require("../../../../adapter-vue.js");
const TUIChatEngine = require("@tencentcloud/chat-uikit-engine");
const Icon = require("../../../common/Icon.vue.js");
const iconClose = require("../../../../assets/icon/icon-close.svg.js");
const env = require("../../../../utils/env.js");
const index = require("../../emoji-config/index.js");
const _hoisted_1 = { class: "input-quote-content" };
const _hoisted_2 = { class: "max-one-line" };
const _sfc_main = /* @__PURE__ */ Vue.defineComponent({
  __name: "index",
  props: {
    displayType: { default: "editor" }
  },
  setup(__props) {
    const props = __props;
    const TYPES = TUIChatEngine.TYPES;
    const quoteMessage = Vue.ref();
    Vue.onMounted(() => {
      TUIChatEngine.TUIStore.watch(TUIChatEngine.StoreName.CHAT, {
        quoteMessage: onQuoteMessageUpdated
      });
    });
    Vue.onUnmounted(() => {
      TUIChatEngine.TUIStore.unwatch(TUIChatEngine.StoreName.CHAT, {
        quoteMessage: onQuoteMessageUpdated
      });
    });
    const quoteContentText = Vue.computed(() => {
      var _a, _b;
      let _quoteContentText;
      switch ((_a = quoteMessage.value) == null ? void 0 : _a.type) {
        case TYPES.MSG_TEXT:
          _quoteContentText = index.transformTextWithKeysToEmojiNames((_b = quoteMessage.value.payload) == null ? void 0 : _b.text);
          break;
        case TYPES.MSG_IMAGE:
          _quoteContentText = TUIChatEngine.TUITranslateService.t("TUIChat.图片");
          break;
        case TYPES.MSG_AUDIO:
          _quoteContentText = TUIChatEngine.TUITranslateService.t("TUIChat.语音");
          break;
        case TYPES.MSG_VIDEO:
          _quoteContentText = TUIChatEngine.TUITranslateService.t("TUIChat.视频");
          break;
        case TYPES.MSG_FILE:
          _quoteContentText = TUIChatEngine.TUITranslateService.t("TUIChat.文件");
          break;
        case TYPES.MSG_CUSTOM:
          _quoteContentText = TUIChatEngine.TUITranslateService.t("TUIChat.自定义");
          break;
        case TYPES.MSG_FACE:
          _quoteContentText = TUIChatEngine.TUITranslateService.t("TUIChat.表情");
          break;
        case TYPES.MSG_MERGER:
          _quoteContentText = TUIChatEngine.TUITranslateService.t("TUIChat.聊天记录");
          break;
        default:
          _quoteContentText = TUIChatEngine.TUITranslateService.t("TUIChat.消息");
          break;
      }
      return _quoteContentText;
    });
    function cancelQuote() {
      TUIChatEngine.TUIStore.update(TUIChatEngine.StoreName.CHAT, "quoteMessage", { message: void 0, type: "quote" });
    }
    function onQuoteMessageUpdated(options) {
      if ((options == null ? void 0 : options.message) && (options == null ? void 0 : options.type) === "quote") {
        quoteMessage.value = options.message;
      } else {
        quoteMessage.value = void 0;
      }
    }
    return (_ctx, _cache) => {
      return Boolean(Vue.unref(quoteMessage)) && props.displayType !== "audio" ? (Vue.openBlock(), Vue.createElementBlock("div", {
        key: 0,
        class: Vue.normalizeClass({
          "input-quote-container": true,
          "input-quote-container-uni": Vue.unref(env.isUniFrameWork),
          "input-quote-container-h5": Vue.unref(env.isH5)
        })
      }, [
        Vue.createElementVNode("div", _hoisted_1, [
          Vue.createElementVNode("div", _hoisted_2, Vue.toDisplayString(Vue.unref(quoteMessage).nick || Vue.unref(quoteMessage).from) + ": " + Vue.toDisplayString(Vue.unref(quoteContentText)), 1),
          Vue.createVNode(Icon.default, {
            class: "input-quote-close-icon",
            file: Vue.unref(iconClose.default),
            width: "11px",
            height: "11px",
            onOnClick: cancelQuote
          }, null, 8, ["file"])
        ])
      ], 2)) : Vue.createCommentVNode("", true);
    };
  }
});
exports.default = _sfc_main;
