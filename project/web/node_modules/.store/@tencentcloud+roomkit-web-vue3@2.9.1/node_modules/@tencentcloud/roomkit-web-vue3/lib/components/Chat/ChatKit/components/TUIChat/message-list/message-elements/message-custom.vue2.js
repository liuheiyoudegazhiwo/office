"use strict";
Object.defineProperties(exports, { __esModule: { value: true }, [Symbol.toStringTag]: { value: "Module" } });
const Vue = require("vue");
require("../../../../adapter-vue.js");
const TUIChatEngine = require("@tencentcloud/chat-uikit-engine");
const typeCheck = require("../../../../utils/type-check.js");
const constant = require("../../../../constant.js");
const Icon = require("../../../common/Icon.vue.js");
const starLight = require("../../../../assets/icon/star-light.png.js");
const _hoisted_1 = { class: "custom" };
const _hoisted_2 = { key: 0 };
const _hoisted_3 = ["href"];
const _hoisted_4 = { key: 0 };
const _hoisted_5 = ["href"];
const _hoisted_6 = { key: 1 };
const _hoisted_7 = {
  key: 1,
  class: "evaluate"
};
const _hoisted_8 = { class: "evaluate-list" };
const _hoisted_9 = ["src"];
const _hoisted_10 = {
  key: 3,
  class: "textLink"
};
const _hoisted_11 = ["href"];
const _hoisted_12 = ["innerHTML"];
const _sfc_main = /* @__PURE__ */ Vue.defineComponent({
  __name: "message-custom",
  props: {
    messageItem: { default: void 0 },
    content: { default: void 0 }
  },
  setup(__props) {
    const props = __props;
    const custom = Vue.ref();
    const message = Vue.ref();
    const extension = Vue.ref();
    const isCustom = Vue.ref({
      businessID: ""
    });
    Vue.watchEffect(() => {
      custom.value = props.content;
      message.value = props.messageItem;
      const { payload } = props.messageItem;
      isCustom.value = payload.data || "";
      isCustom.value = typeCheck.JSONToObject(payload.data);
      if (payload.data === constant.CHAT_MSG_CUSTOM_TYPE.SERVICE) {
        extension.value = typeCheck.JSONToObject(payload.extension);
      }
    });
    const openLink = (url) => {
      window.open(url);
    };
    return (_ctx, _cache) => {
      return Vue.openBlock(), Vue.createElementBlock("div", _hoisted_1, [
        Vue.unref(isCustom).businessID === Vue.unref(constant.CHAT_MSG_CUSTOM_TYPE).SERVICE ? (Vue.openBlock(), Vue.createElementBlock("div", _hoisted_2, [
          Vue.createElementVNode("h1", null, [
            Vue.createElementVNode("label", null, Vue.toDisplayString(Vue.unref(extension).title), 1),
            Vue.unref(extension).hyperlinks_text ? (Vue.openBlock(), Vue.createElementBlock("a", {
              key: 0,
              href: Vue.unref(extension).hyperlinks_text.value,
              target: "view_window"
            }, Vue.toDisplayString(Vue.unref(extension).hyperlinks_text.key), 9, _hoisted_3)) : Vue.createCommentVNode("", true)
          ]),
          Vue.unref(extension).item && Vue.unref(extension).item.length > 0 ? (Vue.openBlock(), Vue.createElementBlock("ul", _hoisted_4, [
            (Vue.openBlock(true), Vue.createElementBlock(Vue.Fragment, null, Vue.renderList(Vue.unref(extension).item, (item, index) => {
              return Vue.openBlock(), Vue.createElementBlock("li", { key: index }, [
                Vue.unref(typeCheck.isUrl)(item.value) ? (Vue.openBlock(), Vue.createElementBlock("a", {
                  key: 0,
                  href: item.value,
                  target: "view_window"
                }, Vue.toDisplayString(item.key), 9, _hoisted_5)) : (Vue.openBlock(), Vue.createElementBlock("p", _hoisted_6, Vue.toDisplayString(item.key), 1))
              ]);
            }), 128))
          ])) : Vue.createCommentVNode("", true),
          Vue.createElementVNode("article", null, Vue.toDisplayString(Vue.unref(extension).description), 1)
        ])) : Vue.unref(isCustom).businessID === Vue.unref(constant.CHAT_MSG_CUSTOM_TYPE).EVALUATE ? (Vue.openBlock(), Vue.createElementBlock("div", _hoisted_7, [
          Vue.createElementVNode("h1", null, Vue.toDisplayString(Vue.unref(TUIChatEngine.TUITranslateService).t("message.custom.对本次服务评价")), 1),
          Vue.createElementVNode("ul", _hoisted_8, [
            (Vue.openBlock(true), Vue.createElementBlock(Vue.Fragment, null, Vue.renderList(Math.max(Vue.unref(isCustom).score, 0), (item, index) => {
              return Vue.openBlock(), Vue.createElementBlock("li", {
                key: index,
                class: "evaluate-list-item"
              }, [
                Vue.createVNode(Icon.default, {
                  file: Vue.unref(starLight.default),
                  class: "file-icon"
                }, null, 8, ["file"])
              ]);
            }), 128))
          ]),
          Vue.createElementVNode("article", null, Vue.toDisplayString(Vue.unref(isCustom).comment), 1)
        ])) : Vue.unref(isCustom).businessID === Vue.unref(constant.CHAT_MSG_CUSTOM_TYPE).ORDER ? (Vue.openBlock(), Vue.createElementBlock("div", {
          key: 2,
          class: "order",
          onClick: _cache[0] || (_cache[0] = ($event) => openLink(Vue.unref(isCustom).link))
        }, [
          Vue.createElementVNode("img", {
            src: Vue.unref(isCustom).imageUrl
          }, null, 8, _hoisted_9),
          Vue.createElementVNode("main", null, [
            Vue.createElementVNode("h1", null, Vue.toDisplayString(Vue.unref(isCustom).title), 1),
            Vue.createElementVNode("p", null, Vue.toDisplayString(Vue.unref(isCustom).description), 1),
            Vue.createElementVNode("span", null, Vue.toDisplayString(Vue.unref(isCustom).price), 1)
          ])
        ])) : Vue.unref(isCustom).businessID === Vue.unref(constant.CHAT_MSG_CUSTOM_TYPE).LINK ? (Vue.openBlock(), Vue.createElementBlock("div", _hoisted_10, [
          Vue.createElementVNode("p", null, Vue.toDisplayString(Vue.unref(isCustom).text), 1),
          Vue.createElementVNode("a", {
            href: Vue.unref(isCustom).link,
            target: "view_window"
          }, Vue.toDisplayString(Vue.unref(TUIChatEngine.TUITranslateService).t("message.custom.查看详情>>")), 9, _hoisted_11)
        ])) : (Vue.openBlock(), Vue.createElementBlock("span", {
          key: 4,
          innerHTML: _ctx.content.custom
        }, null, 8, _hoisted_12))
      ]);
    };
  }
});
exports.default = _sfc_main;
